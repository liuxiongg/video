var cname = ['movie_tab_content', 'movie_preview_title_content', 'tv_tab_content', 'comic_tab_content', 'comic_update_title', 'variety_tab_content'];
var lc = window.location.toString().indexOf('50bang');
var is50bang = (lc > 0 && lc < 18) ? true: false;
function showPage(cname) {
	if (!is50bang) {
		return;
	}
	Fn(cname).each(function(o, i) {
		Fn.NAME(o).each(function(v, k) {
			Fn(this).show();
		})
	})
}
showPage(cname);
xloadImg.load('slideF_Con', false);
var pptBox = {
	current: '',
	current_sn: 0,
	offset_len: 0,
	total_len: 0,
	pObj: 'focus',
	pList: '',
	pageLimit: 5,
	timer: [],
	init: function() {
		var _self = this;
		if (Fn.Browser.ie6 && !ie6Load) {
			setTimeout(function() {
				_self.init()
			},
			2000);
			return;
		}
		_self.regBtn();
		setTimeout(function() {
			_self.intval()
		},
		5000);
	},
	regBtn: function() {
		var _self = this;
		this.pList = Fn(this.pObj).tag('li');
		Fn('videoFocus_Left_Btn').click(function() {
			_self.prev();
		}).mouseover(function() {
			_self.stop();
		}).mouseout(function() {
			_self.replay();
		});
		Fn('videoFocus_Right_Btn').click(function() {
			_self.next();
		}).mouseover(function() {
			_self.stop();
		}).mouseout(function() {
			_self.replay();
		});
		Fn(this.pObj).mouseover(function() {
			_self.stop();
		}).mouseout(function() {
			_self.replay();
		});
	},
	prev: function() {
		this.stop();
		this.isreset = false;
		if (this.current_sn == 0) {
			Fn(this.pObj).css({
				'left': -(this.pList.length / 2 * 187) + 'px'
			});
			this.current_sn = 15;
		}
		this.current_sn = this.current_sn - this.pageLimit;
		this.play();
	},
	next: function(t) {
		if (!t) this.stop();
		this.isreset = false;
		if (this.current_sn >= (this.pList.length - (this.pageLimit * 3))) {
			Fn(this.pObj).css({
				'left': 0 + 'px'
			});
			this.current_sn = 0;
		}
		this.current_sn = this.current_sn + this.pageLimit;
		this.play();
	},
	reset: function() {
		if (this.isreset) {
			Fn(this.pObj).css({
				'left': '0px'
			});
			this.current_sn = 0;
		}
	},
	play: function() {
		var offset_len = -this.current_sn * 187;
		xquery_animate(this.pObj, offset_len, '', 10,
		function() {
			pptBox.reset()
		});
	},
	replay: function() {
		var _self = this;
		this.stop();
		this.isstop = false;
		this.timer['replay'] = setTimeout(function() {
			_self.intval()
		},
		6000);
	},
	stop: function() {
		this.isstop = true;
		clearTimeout(this.timer['replay']);
	},
	intval: function() {
		var _self = this;
		clearTimeout(this.timer['replay']);
		if (this.isstop) return false;
		this.next(true);
		this.timer['replay'] = setTimeout(function() {
			_self.intval()
		},
		6000);
	}
}
pptBox.init();
var cC = {
	data: {},
	_set: function(key, val) {
		this.data[key] = val;
	},
	_get: function(key) {
		return this.data[key];
	}
}
var tabItem = ['movie_tab', 'tv_tab', 'comic_tab', 'variety_tab'];
var slidCon = new Array('slideA_Tab');
/*
Fn(tabItem).each(function(o, i) {
	var tabsNode = this.toString();
	var tabs = cC._get('tabsNode_' + tabsNode) ;
	if (!tabs) {
		cC._set('tabsNode_' + tabsNode, Fn(slidCon[i]).tag('a'));
		tabs = cC._get('tabsNode_' + tabsNode)
	}
	tabs.each(function(v, k) {
		Fn(this).click(function() {
			doLoadTabImg(Fn(this).attr('name'), k);
		})
	})
});
*/
function doLoadTabImg(n, k) {
	cC._get('tabsNode_' + n).each(function(o, i) {
		var id_array = this.id.split('_');
		var name = Fn(this).attr('name');
		if (name.indexOf('_preview_') > 0 || name.indexOf('_update_') > 0) {
			var id = id_array['3'];
		} else {

			var id = id_array['2'];
		}
		var content_id = name + '_content_' + id.toString();
		if (i != k) {
			Fn(this).removeClass('selected');
			Fn(content_id).hide();
		} else {
			Fn(this).addClass('selected');
			Fn(content_id).show();
			xloadImg.load(content_id);
		}
	})
}
function doLoadTabFirst(n) {
	var obj = cC._get('tabsNode_' + n)[0];
	var id_array = obj.id.split('_');
	var name = Fn(obj).attr('name');
	if (name.indexOf('_preview_') > 0 || name.indexOf('_update_') > 0) {
		var id = id_array['3'];
	} else {
		var id = id_array['2'];
	}
	var content_id = name + '_content_' + id.toString();
	xloadImg.load(content_id, true);
}
Fn('focus').tag('li').each(function() {
	Fn(this).mouseover(function() {
		Fn(this).addClass('focusPicHover');
	}).mouseout(function() {
		Fn(this).removeClass('focusPicHover');
	})
});
var slideItem = ['slideA_Con', 'slideB_Con', 'slideC_Con', 'slideD_Con', 'slideF_Con'];
Fn(slideItem).each(function(o, i) {
	var itemNode = this.toString();
	var item = cC._get('slideItem_' + itemNode);
	if (!item) {
		cC._set('slideItem_' + itemNode, Fn(itemNode).tag('ul'));
		item = cC._get('slideItem_' + itemNode)
	}
	Fn(itemNode).tag('li').each(function() {
		Fn(this).mouseover(function() {
			Fn(this).addClass('liHover');
		}).mouseout(function() {
			Fn(this).removeClass('liHover');
		})
	});
})



var right = Fn('globalRightMenu');
var topDom = Fn('getTop');
function doScroll() {
	var scrollTop = document.documentElement.scrollTop + document.body.scrollTop;
	if (scrollTop > 0) {
		topDom.show();
		if (Fn.Browser.ie) {
			var des = scrollTop + 200;
			right.css({
				'position': 'absolute',
				'top': des + 'px'
			});
		} else {
			right.css({
				'position': 'fixed',
				'top': '280px'
			});
		}
	} else {
		if (Fn.Browser.ie) {
			var des = scrollTop + 200;
			right.css({
				'position': 'absolute',
				'top': des + 'px'
			});
		} else {
			right.css({
				'position': 'fixed',
				'top': '280px'
			});
		}
		topDom.hide();
	}
}
var oNewYearBanner = Fn('newYearScrollBottom');
function scrollChangeTop() {
	if (!oNewYearBanner.elem) return;
	var top = document.documentElement.scrollTop + document.body.scrollTop;
	if (Fn.Browser.ie6) {
		var h = top + document.documentElement.clientHeight - 71;
		oNewYearBanner.css({
			'position': 'absolute',
			'top': h + 'px'
		})
	}
}
function doLoadImg() {
	Fn(slidCon).each(function() {
		var s = this.toString();
		doLoadTabFirst(Fn(Fn(s).tag('a')[0]).attr('name'))
	})
}
window.onscroll = function() {
	doScroll();
	//doLoadImg();
	scrollChangeTop();
}
doScroll();